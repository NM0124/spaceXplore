<!DOCTYPE html>
<html>
<head>
    <title>SpaceXplore</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="premium-dark">
<div class="premium-container">
    <header class="premium-header">
        <div class="header-content">
            <div class="brand">
                <h1 class="brand-title">SpaceXplore</h1>
                <p class="brand-tagline">Admin Panel</p>
            </div>
            <div class="header-actions">
                <form method="get" class="time-selector">
                    <div class="time-input-group">
                        <span class="time-label">Demo Time</span>
                        <input type="time" name="time" value="{{ demo_time }}" class="premium-time-input">
                        <button type="submit" class="btn-gradient">Update</button>
                    </div>
                </form>
                <a href="/logout" class="btn-danger">
                    <svg class="icon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
                    </svg>
                    Logout
                </a>
            </div>
        </div>
    </header>
    <div class="control-panel">
        <div class="panel-header">
            <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"/>
            </svg>
            <div>
                <h2 class="panel-title">Room Status Override</h2>
                <p class="panel-subtitle">Manually update room availability</p>
            </div>
        </div>
        <form method="post" class="control-form">
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Select Room</label>
                    <select name="room_id" class="form-select" required>
                        <option value="">Choose a room...</option>
                        {% for r in rooms %}
                        <option value="{{ r.id }}">{{ r.id }} - {{ r.type }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select name="action" class="form-select" required>
                        <option value="">Choose action...</option>
                        <option value="occupied">ðŸ”´ Mark as Occupied</option>
                        <option value="available">ðŸŸ¢ Mark as Available</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Until Time</label>
                    <input type="time" name="till_time" class="form-input" required>
                </div>
                <div class="form-group form-submit">
                    <button type="submit" class="btn-submit">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                        Update Status
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="section-header">
        <h2 class="section-title">All Spaces</h2>
        <p class="section-subtitle">Real-time status of all rooms</p>
    </div>
    <div class="premium-grid">
        {% for room in rooms %}
        <div class="premium-room-card {{ room.status }}">
            <div class="card-header">
                <div class="room-info">
                    <h3 class="room-name">{{ room.id }}</h3>
                    <span class="room-badge">{{ room.type }}</span>
                </div>
                <div class="status-indicator {{ room.status }}">
                    <span class="status-dot"></span>
                </div>
            </div>
            <div class="card-body">
                <div class="capacity-info">
                    <svg width="18" height="18" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                    </svg>
                    <span>{{ room.capacity }} seats</span>
                </div>
                {% if room.status == "Occupied" and room.next_available %}
                <div class="next-time">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                    </svg>
                    <span>Available at {{ room.next_available }}</span>
                </div>
                {% endif %}
            </div>
            <div class="card-footer">
                <span class="status-text">{{ room.status }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
</body>
</html>